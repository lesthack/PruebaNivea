{% extends "base_site.html" %}

{% block title_page %}{{ evaluacion.nombre_persona }}{% endblock %}

{% block content %}
<div class="panel panel-default">
  <div class="panel-heading">Datos Generales</div>
  <div class="panel-body">
    <div class="table-responsive table-bordered">
      <table class="table">
        <tbody>
          <tr>
            <td width="150px"><b>ID</b></td>
            <td>{{ evaluacion.id }}</td>
          </tr>
          <tr>
            <td>Fecha</td>
            <td>{{ evaluacion.fecha }}</td>
          </tr>
          <tr>
            <td>Sexo</td>
            <td>{{ evaluacion.get_sexo }}</td>
          </tr>
          <tr>
            <td>Edad</td>
            <td>{{ evaluacion.edad }} años</td>
          </tr>
          <tr>
            <td>Estado Civíl</td>
            <td>{{ evaluacion.get_estado_civil }}</td>
          </tr>
          <tr>
            <td>Escolaridad</td>
            <td>{{ evaluacion.get_escolaridad }}</td>
          </tr>
          <tr>
            <td>Localidad</td>
            <td>{{ evaluacion.localidad }}</td>
          </tr>
          <tr>
            <td>Número de Hijos</td>
            <td>{{ evaluacion.get_numero_hijos }}</td>
          </tr>
        </tbody>
      </table>
      <a href="/evaluaciones/e/{{ evaluacion.id }}/q/" class="btn btn-default btn-block">Cuestionario</a>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">Competencias</div>
  <div class="panel-body">
      <table class="table">
        <tbody>
          {% for resultado in evaluacion.get_resultados %}
          <tr>
            <td><b>{{ resultado.competencia|title }}</b></td>
            <td class="{{ resultado.class }}">{{ resultado.total }}</td>
          </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <th>Total</th>
            <th>{{ evaluacion.get_calificacion.total }}</th>
          </tr>
          <tr class="{{ evaluacion.get_calificacion.class }}">
            <th>Nivel</th>
            <th>{{ evaluacion.get_calificacion.nivel }}</th>
          </tr>
        </tfoot>
      </table>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">Resultados</div>
  <div class="panel-body">
    <div id="chart_div" style="width: 95%;"></div>
    <script charset="utf-8">
      $(function() {
        google.charts.load('current', {packages: ['corechart', 'bar']});
        google.charts.setOnLoadCallback(drawMaterial);

        function drawMaterial() {
          var data = google.visualization.arrayToDataTable([
            ['Competencia', 'Resultado', { role: 'style' }],
            {% for resultado in evaluacion.get_resultados %}
            ['{{ resultado.competencia|title }}', {{ resultado.total }}, 'color: red'],
            {% endfor %}
          ]);

          var materialOptions = {
            hAxis: {
              title: 'Total',
              minValue: 0,
            },
            vAxis: {
              title: 'Competencia'
            },
            bars: 'horizontal'
          };
          var chart = new google.charts.Bar(document.getElementById('chart_div'));
          chart.draw(data, materialOptions);
        }
      });
    </script>
  </div>
</div>
<a href="/evaluaciones/" class="btn btn-default">Regresar</a>
{% endblock %}

